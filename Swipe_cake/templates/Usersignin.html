{% extends 'index.html' %} 
{% load static %}
{% block title %}Swipe_cake|otp {% endblock %}
{% block content %}

<!-- Header Section Begin -->
<header class="header">
    <div class="header__top">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="header__top__inner">
                        <div class="header__top__left">
                        </div>
                        <div class="header__logo">
                            <a href="./index.html"><img src="{% static 'img/logo.png' %}" alt=""></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="header__menu mobile-menu">
                    <ul>
                        <li class="active"><a href="./index.html">Home</a></li>
                        <li><a href="./about.html">About</a></li>
                        <li><a href="./shop.html">Shop</a></li>
                        <li><a href="#">Registration</a>
                            <ul class="dropdown">
                                <li><a href="./shop-details.html">Online Class</a></li>
                                <li><a href="./shoping-cart.html">Offline Class</a></li>
                            </ul>
                        </li>
                        <li><a href="./contact.html">Contact</a></li>
                        <li><a href="User_login">Login</a></li> 
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</header>
<!-- Header Section End -->

<!-- Hero Section Begin -->
<section class="hero">
    <div class="hero__slider owl-carousel">
        <div class="hero__item set-bg" data-setbg="{% static 'img/hero/hero-1.jpg' %}">
            <div class="container">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-4">
                        <div class='text-center'>
                            <div style="width: 500px; height: 600px; background-color:white; border: 5px solid #fcb103; padding: 70px;">
                     <form method="POST" action="{% url 'sentotp' %}">
                     {% csrf_token %}

                     <h2 class="fw-bold text-uppercase">Sign up</h2>
                 <p class="text-white-50">Please create your account</p>



  <div class="form-outline form-white">
    <label for='username' class="form-label" for="typeEmailX">user name</label>
    <input type='text' id="text" class="form-control form-control-lg" name='username' />
   <small></small>
  </div>
  <div class="form-outline form-white">
    <label class="form-label" for="typeEmailX">phonenumber</label>
    <input type='number' id="phonenumber" class="form-control form-control-lg" name='phonenumber' />
    <small></small>
  </div>

  <div class="form-outline form-white ">
    <label for='password' class="form-label" for="typePasswordX">Password</label>
    <input type="password" id="typePasswordX" class="form-control form-control-lg" name='password' />
   <small></small>
  </div>
  <div class="form-outline form-white mb-4">
    <label class="form-label" for="typePasswordX">confirm Password</label>
      <input type="password"  id="typePasswordX" class="form-control form-control-lg" name='confirmpassword' />
    <small></small>
    </div>
    {% if messages %}
  <ul class="messages text-danger">
       {% for message in messages %}
  {{ message }}
   {% endfor %}
        </ul>
{% endif %}

  
<button class="primary-btn" type="submit">SEND OTP</button>
<button class="primary-btn" type="submit">clear</button>
  


</div>


</form>

</div>
</div>
</div>
</div>
</div>
</section>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/custom.js' %}"></script>
<script>
    {% block script %}
    $(document).ready(function() {
    const form = document.querySelector("form");

function showError(input, message) {
const formControl = input.parentElement;
formControl.classList.remove("success");
formControl.classList.add("error");
const label = formControl.querySelector("small");
label.innerText = message;
}

function showSuccess(input) {
const formControl = input.parentElement;
formControl.classList.remove("error");
formControl.classList.add("success");
const label = formControl.querySelector("small");
label.innerText = label.getAttribute("data-label");
}

function validatePassword(password) {
const passRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
return passRegex.test(password);
}

form.addEventListener("submit", function(event) {
event.preventDefault();

const phonenumberInput = form.querySelector('[name="phonenumber"]');
const usernameInput = form.querySelector('[name="username"]');
const passwordInput = form.querySelector('[name="password"]');
const confirmPasswordInput = form.querySelector('[name="confirmpassword"]');

// Reset labels
const labels = form.querySelectorAll("small");
labels.forEach(label => {
label.innerText = label.getAttribute("data-label");
});

let isValid = true;


if (phonenumberInput.value.trim().length !== 10) {
showError(phonenumberInput, "Invalid Number");
isValid = false;
} else {
showSuccess(phonenumberInput);
}

// Other validation checks...

if (!validatePassword(passwordInput.value.trim())) {
showError(passwordInput, "Minimum eight characters, at least one uppercase letter, one lowercase letter, and one number");
isValid = false;
} else {
showSuccess(passwordInput);
}

if (confirmPasswordInput.value.trim() !== passwordInput.value.trim()) {
showError(confirmPasswordInput, "Password & confirm password must match");
isValid = false;
} else {
showSuccess(confirmPasswordInput);
}

if (isValid) {
form.submit();
}
});
});
{% endblock script %}
</script>


{% endblock content %}

